---
import HeaderLink from "./HeaderLink.astro";
import { SITE_TITLE } from "../consts";
---

<header
	class="sticky top-0 z-50 backdrop-blur-md bg-white/70 dark:bg-white-900/80 shadow-sm"
>
	<div class="container mx-auto px-4 sm:px-6">
		<nav class="flex items-center justify-between h-16">
			<div class="flex-shrink-0">
				<h2>
					<a
						href="/"
					>
						<img
							src="/tec.png"
							alt="Logo Escuela"
							class="object-contain h-10 w-10 mt-1.5"
						/>
					</a>
				</h2>
			</div>

			<!-- Menú para celular (hamburguesa) -->
			<div class="md:hidden pr-4">
				<button
					id="menu-toggle"
					class="text-blue-700 dark:text-[#457b9d] hover:text-blue-600 focus:outline-none transition duration-300"
					aria-label="Menú"
				>
					<div class="hamburger-icon w-6 h-6 relative">
						<span
							class="hamburger-line top-0 absolute w-6 h-0.5 bg-current transform transition-all duration-300"
						></span>
						<span
							class="hamburger-line mt-2 absolute w-6 h-0.5 bg-current transform transition-all duration-300"
						></span>
						<span
							class="hamburger-line mt-4 absolute w-6 h-0.5 bg-current transform transition-all duration-300"
						></span>
					</div>
				</button>
			</div>

			<!-- Enlaces principales - visibles en computadora -->
			<div class="hidden md:flex items-center space-x-4">
				<div class="internal-links flex space-x-1">
					<HeaderLink href="/">Home</HeaderLink>
					<HeaderLink href="/blog">Blog</HeaderLink>
					<HeaderLink href="/resources">Resources</HeaderLink>
				</div>

				<div class="social-links flex items-center ml-4">
					<a
						href="https://github.com/fergm04/blog-test"
						target="_blank"
						class="text-gray-600 dark:text-gray-300 hover:text-blue-600 transition duration-200 p-2"
					>
						<span class="sr-only">Go to Astro's GitHub repo</span>
						<svg viewBox="0 0 16 16" aria-hidden="true" width="24" height="24">
							<path
								fill="currentColor"
								d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
							></path>
						</svg>
					</a>
				</div>
			</div>
		</nav>
		
		<div
			id="mobile-menu"
			class="md:hidden max-h-0 overflow-hidden transition-all duration-300 ease-in-out"
		>
			<div class="flex flex-col space-y-2 py-2 pb-4">
				<HeaderLink
					href="/"
					class="text-gray-800 dark:text-gray-200 px-4 py-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition duration-200"
					>Home</HeaderLink
				>
				<HeaderLink
					href="/blog"
					class="text-gray-800 dark:text-gray-200 px-4 py-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition duration-200"
					>Blog</HeaderLink
				>
				<HeaderLink
					href="/resources"
					class="text-gray-800 dark:text-gray-200 px-4 py-2 rounded hover:bg-gray-100 dark:hover:bg-gray-800 transition duration-200"
					>Resources</HeaderLink
				>

				<div class="social-links flex items-center px-4 py-2">
					<a
						href="https://github.com/fergm04/blog-test"
						target="_blank"
						class="text-gray-600 dark:text-gray-300 hover:text-blue-600 transition duration-200"
					>
						<span class="sr-only">Go to Astro's GitHub repo</span>
						<svg viewBox="0 0 16 16" aria-hidden="true" width="24" height="24">
							<path
								fill="currentColor"
								d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
							></path>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</div>
</header>

<style>
	/* Agregar padding-top al contenido principal para evitar superposición */
	:global(main) {
		padding-top: 4rem;
	}

	:global(.content-container) {
		padding-top: 4rem;
	}

	/* Estilos para el icono de hamburguesa */
	.hamburger-icon.active .hamburger-line:nth-child(1) {
		transform: translateY(8px) rotate(45deg);
	}

	.hamburger-icon.active .hamburger-line:nth-child(2) {
		opacity: 0;
	}

	.hamburger-icon.active .hamburger-line:nth-child(3) {
		transform: translateY(-8px) rotate(-45deg);
	}

	/* Clase para el menú abierto */
	#mobile-menu.expanded {
		max-height: 300px; /* Altura máxima cuando está expandido */
	}
</style>

<script>
	// Funcionalidad del menú hamburguesa con animación
	document.addEventListener("DOMContentLoaded", () => {
		const menuToggle = document.getElementById("menu-toggle");
		const mobileMenu = document.getElementById("mobile-menu");
		const hamburgerIcon = menuToggle?.querySelector(".hamburger-icon");

		if (menuToggle && mobileMenu && hamburgerIcon) {
			menuToggle.addEventListener("click", () => {
				// Animar el icono de hamburguesa
				hamburgerIcon.classList.toggle("active");

				// Animar la apertura/cierre del menú
				mobileMenu.classList.toggle("expanded");
			});
		}
	});
</script>
